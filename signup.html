<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up</title>
    <link rel="stylesheet" href="signup.css">    
</head>
<body>
  <section id="signup">
    <div class="signcontainer">
      <div class="content-wrapper">
        <div class="form-box">
            <h1 id="title">Sign Up</h1>
            <form id="signupForm">
            <div class="input-group">
              <div class="input-field">
                <input type="text" placeholder="name" id="nameField">
              </div>
              <div class="input-field">
                <input type="email" placeholder="email" id="email">
              </div>
              <div class="input-field">
                <input type="password" placeholder="password" id="password">
              </div>
            </div>
            <div class="btn-field">
            <button type="button" id="signupBtn">Sign up</button>
            <button type="button" id="signinBtn" class="disable">Sign in</button>
            <button type="submit" id="submit">Submit</button>
            </div>
            </form>
        </div>
      
        <div class="userlist">
          <h3>User Information</h3>
          <div id="currentUser" class="current-user">
            <p>Currently logged in: <span id="loggedInUser">None</span></p>
          </div>
          <h4>All Users:</h4>
          <ul id="ul">
          </ul>
        </div>
      </div>
    </div>
  </section>

    <script>
     let signupBtn = document.getElementById("signupBtn");
     let signinBtn = document.getElementById("signinBtn");
     let nameField = document.getElementById("nameField");
     let title = document.getElementById("title");
     let form = document.getElementById("signupForm");
     let userList = document.getElementById("ul");
     let loggedInUserSpan = document.getElementById("loggedInUser");

    signinBtn.onclick = function() {
        nameField.style.display = "none";
        title.innerHTML = "Sign In";
        signupBtn.classList.add("disable");
        signinBtn.classList.remove("disable");
    }

    signupBtn.onclick = function() {
        nameField.style.display = "block";
        title.innerHTML = "Sign Up";
        signinBtn.classList.add("disable");
        signupBtn.classList.remove("disable");       
    }

    form.onsubmit = function(e) {
        e.preventDefault();
        let name = document.getElementById("nameField").value;
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;

        if (name && email && password) {
            let user = { name: name, email: email, password: password };
            let users = JSON.parse(localStorage.getItem("all_users")) || [];
            users.push(user);
            localStorage.setItem("all_users", JSON.stringify(users));

            sessionStorage.setItem("currentUser", JSON.stringify(user));

            addUserToList(name);

            updateLoggedInUser();
            form.reset();
        } else {
            alert("Please fill in all fields");
        }
    }

    function addUserToList(name) {
        let li = document.createElement("li");
        li.textContent = name;
        userList.appendChild(li);
    }

    function updateLoggedInUser() {
        let currentUser = JSON.parse(sessionStorage.getItem("currentUser"));
        if (currentUser) {
            loggedInUserSpan.textContent = currentUser.name;
        } else {
            loggedInUserSpan.textContent = "None";
        }
    }

    window.onload = function() {
        let users = JSON.parse(localStorage.getItem("all_users")) || [];
        users.forEach(user => addUserToList(user.name));
        updateLoggedInUser();
    }
    </script>
</body>
</html>